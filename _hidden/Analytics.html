<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Age Verification Analytics</title>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js"></script>
<style>
body{margin:0;font-family:Segoe UI,Arial,sans-serif;background:#36393f;color:#fff;display:flex;justify-content:center;align-items:center;height:100vh}
.card{background:#2f3136;padding:40px 50px;border-radius:12px;box-shadow:0 0 20px rgba(0,0,0,0.5);width:400px;display:none}
h1{text-align:center;font-size:1.8rem;margin-bottom:30px;color:#7289da}
.field{display:flex;justify-content:space-between;margin:12px 0;padding:10px;background:#202225;border-radius:8px;font-size:1.1rem}
.label{font-weight:600;color:#b9bbbe}
.value{color:#fff;font-weight:500}
</style>
</head>
<body>

<div class="card" id="dashboard">
<h1>Age Verification Analytics</h1>
<div class="field"><span class="label">✅ I am 18+:</span> <span class="value" id="yesCount">0</span></div>
<div class="field"><span class="label">❌ Under 18:</span> <span class="value" id="noCount">0</span></div>
</div>

<script>
// 1️⃣ Initialize Firebase
const firebaseConfig = {
apiKey: "AIzaSyAmOHMwo9BYwW7uC7OyvNS55vy6GzljfQQ",
authDomain: "age-verification-analytics.firebaseapp.com",
projectId: "age-verification-analytics",
storageBucket: "age-verification-analytics.appspot.com",
messagingSenderId: "953938613705",
appId: "1:953938613705:web:1ed99586573f28e7bbc418"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// 2️⃣ Password protection
const passwordHash = "c6496946812eb09cc274ad3ab7d8150ec4d72f520f38c12dc659cc04040c42b4";
let input = prompt("Enter password to view analytics:");
if(!input || sha256(input.trim()) !== passwordHash){
document.body.innerHTML="<h2 style='color:red;text-align:center;font-family:Segoe UI;'>Access Denied</h2>";
} else {
const dashboard = document.getElementById('dashboard');
dashboard.style.display="block";

// 3️⃣ Real-time Firebase listener
const counterRef = db.collection("ageVerification").doc("counters");
counterRef.onSnapshot(doc=>{
const data = doc.data();
document.getElementById('yesCount').textContent = data?.yesCount || 0;
document.getElementById('noCount').textContent = data?.noCount || 0;
});
}
</script>
</body>
</html>
